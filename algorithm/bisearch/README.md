# 二分查找
锵锵锵！这里是二分查找的板块，也是整个notebook里最早的板块！！撒花！！

其实二分这块之前在leetcode上也写过很多东西，会慢慢往这里搬运过来的。

## 二分的思想
well，要解释起来整个的思想可以说是非常的简单，无非就是在一个有序的排列中确定一个特定的元素的位置的时候，每一步通过比较 ***序列中间的项*** 和 ***要找的项*** 来确定 ***要找的项*** 是在序列的前半段里还是后半段段里，以此来**指数级**地缩小问题规模。

但是，真的只有这些了吗？二分查找的背后究竟蕴含了关于这个世界什么样的真相呢？为什么会存在这么有违于直觉但是高效的搜索方式呢？我们的这个世界什么时候是等差的，什么时候是等比的呢？（还记得 ***本福特定律*** 吗？）这些联想只是在思考二分查找时蹦出来的相关词，没有什么问腿更没有什么答案，只是作为一个思考的方向留在这里。

![螺旋线](../pictures/hurricane.jpg)
<br>

## 二分适用于什么样的问题？
毫不客气（且没有技术含量）地说，查找问题（这不是废话嘛）。
而且是适用于这样的一种查找问题：在一个有着某种很nice的性质的序列 ${S}$ 中，查找满足特定条件(也就是命题) $P$ 的项中最“大”或者最“小”（相对于这个特定关系而言）的一项 $a$。  
我们以查找满足 $P$ 最大项来举例，如果序列 $S$ 满足这样一种性质： 

>$P(a_k)$ 为真，那么任意的 $a_k$ 之前的项都满足 $P$  
>$P(a_k)$ 为假，那么任意的 $a_k$ 之后的项都不满足 $P$

那么，就有可能存在一个最大的满足 $P$ 元素 $a_M$。
（如果要查找的是满足命题 $S$ 的最小项，那么我们只要令 $P$ 为 $S$ 的否命题，然后找到最大 $P(a)$ 的下一项即可）  
正是这样一种性质使得二分查找成为可能：  
假设我们查找 $a_M$ , 那么我们说，给定序列中任意的一项 $a_k$ , 我们总是能确定 $k$ 和 $M$ 之间的关系：  
>如果 $P(a_k)$ 为真，那么一定有 $k\leqslant M$.  
>如果 $P(a_k)$ 为假，那么一定有 $k>M$.  

这样一来，我们就可以中间的用一个项来分割 $S$ ,使得在 $S$ 上的查找问题变成在 $S$ 的前一半或者后一半上的查找问题，让问题规模变成之前的一半。从递归复杂度的角度来看，${T(n)=T(\frac{n}{2}) + O(1)}$, 根据**主方法**我们知道它的时间复杂度是$O(lgn)$。

##### 代码：

```c
int BI_SEARCH（SEQUENCE S, int SEQUENCE_LENTH）
{
      int L = 0, R = SEQQUENCE_LENTH - 1, mid;
      while (L <= R){
            mid = L + (R - L)/2;
            if ( P(S[mid]) IS TRUE ){
                  L = mid + 1;
            } else {
                  R = mid - 1;
            }
      }

      /*
      当循环结束时，L会指向不满足P的最小的元素（如果不存在
      这样的元素那么他会指向数组上溢出的位置SEQUENCE_LENTH+1），
      R会指向满足P的最大元素（如果不存在那么R会指向数组下溢出的
      位置-1）如果我们要找的元素存在，那么此时它的下标应该是R

      +是满足P的元素，-是不满足P的元素

      S: +++++++++++++++++++---------------------
         \_初始L                                 \_初始R

      S: +++++++++++++++++++---------------------
                   结束时R_/ \_结束时L

      R和L会“对换位置”
      */

      return R;
}
```
<br>

我们再回到标题上的问题——什么样的问题能够用二分查找的方法解决？  
如果问题可以进一步抽象成一个查找问题，并且这个查找问题是有这样的特性：从一个序列 $S$ 中查找满足某种命题 $P$ 的最大（小）的一个元素 $a$。最关键的是，$S$ 要对 $P$ 满足上述的那种很nice的性质。

从上面的分析中可以看到，在对问题抽象的过程中，有3个重要的概念：  
>1. 序列 $S$  
>2. 元素 $a$  
>3. 用来判断的命题 $P$  

对整个问题进行抽象：元素很简单，就是跟要找的东西（某个值之类的）有着相同性质的对象、命题一般也容易构造（需要找的元素时满足什么条件的最值？）、之后要判断存不存在这样的一个序列，它由所有的上述对象构成，又对上述的命题有着有序性，如果能够发现这样的序列，我们就可以使用二分查找的方法来找到想要的答案了。

还是很抽象？看看各种例子吧！